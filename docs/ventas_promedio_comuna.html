<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventas Promedio por Comuna</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <style>
        .highcharts-figure, .highcharts-data-table table {
            min-width: 310px; 
            max-width: 1200px;
            margin: 1em auto;
        }
        #container {
            height: 600px;
        }
    </style>
</head>
<body>
    <figure class="highcharts-figure">
        <div id="container"></div>
    </figure>

    <script>
        // Datos
        const categories = ["Puerto Montt", "Concepción", "Osorno", "Talcahuano", "Temuco", "Los Ángeles", "San Pedro de la Paz", "Puerto Varas", "Valdivia", "Coronel", "Arauco", "Castro", "Hualpén", "Villarrica", "Lautaro"];
        const ventasData = [58926934.2, 35083321.9, 23970988.71, 22433600.77, 22159007.48, 20132670.93, 11831708.11, 10837377.2, 9841382.03, 9774927.28, 8692734.03, 4734292.67, 2655484.37, 2479991.06, 2461391.14];

        // Colores únicos y vivos para cada comuna
        const uniqueColors = [
            "#FF5733", // Puerto Montt - Red-Orange
            "#33FF57", // Concepción - Green
            "#3357FF", // Osorno - Blue
            "#FF33A8", // Talcahuano - Pink
            "#33FFF5", // Temuco - Cyan
            "#F3FF33", // Los Ángeles - Yellow
            "#FF8633", // San Pedro de la Paz - Orange
            "#8E44AD", // Puerto Varas - Purple
            "#3498DB", // Valdivia - Bright Blue
            "#1ABC9C", // Coronel - Turquoise
            "#F1C40F", // Arauco - Gold
            "#E74C3C", // Castro - Alizarin
            "#2ECC71", // Hualpén - Emerald
            "#9B59B6", // Villarrica - Amethyst
            "#34495E"  // Lautaro - Dark Blue-Grey
        ];

        // Función para generar datos con colores únicos
        function getDataWithUniqueColors(values) {
            return values.map((val, index) => ({
                y: val,
                color: uniqueColors[index]
            }));
        }

        const sourceText = 'Fuente: <a href="https://www.sii.cl/sobre_el_sii/estadisticas_de_empresas.html" target="_blank">SII - Estadísticas de Empresas</a>';

        // Gráfico: Ventas
        Highcharts.chart('container', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Ventas Promedio por Comuna (Top 15)'
            },
            subtitle: {
                text: sourceText
            },
            xAxis: {
                categories: categories
            },
            yAxis: {
                title: {
                    text: 'Ventas (UF)'
                }
            },
            credits: {
                enabled: false
            },
            plotOptions: {
                column: {
                    borderRadius: '25%',
                    colorByPoint: true
                }
            },
            series: [{
                name: 'Ventas Promedio (UF)',
                data: getDataWithUniqueColors(ventasData)
            }]
        });
    </script>
</body>
</html>